<!DOCTYPE html>
<html>
<head>
<meta content="IE=Edge" http-equiv="X-UA-Compatible">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="yes" name="mobile-web-app-capable">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta content="user-scalable=no" name="viewport">
<meta charset="UTF-8">
<link href="icons/V-72.png" sizes="72x72" rel="apple-touch-icon">
<link href="icons/V-114.png" sizes="114x114" rel="apple-touch-icon">
<link href="icons/V-144.png" sizes="144x144" rel="apple-touch-icon">
<link href="icons/V-192.png" sizes="192x192" type="image/png" rel="icon">
<link href="icons/V-96.png" sizes="96x96" type="image/png" rel="icon">
<link href="manifest.json" rel="manifest">
<script src="js/jquery-3.2.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<title>Valero iPad</title>
</head>
<body>
    <figure id="videoContainer">
        <div class="menuContainer" onclick="menuChange(this)">
            <div class="bar1"></div>
            <div class="bar2"></div>
            <div class="bar3"></div>
        </div>
        <div class="videoController">
            <div id="logo" class="logo showControls">
                <img src="logo.png" style="width: 340px;" />
            </div>
            <div id="videoSelector" class="showControls">
                <span id="instructions" class="instructions showControls">Please click on the buttons below for a <br />better understanding of the process.</span>
                <span class="vidSelect left" data-video="1"><img src="IPadLogo.jpg"><span>Video 1</span></span>
                <span class="vidSelect right" data-video="4"><img src="IPadLogo.jpg"><span>Video 6</span></span><br class="clear" />
                <span class="vidSelect left" data-video="2"><img src="IPadLogo.jpg"><span>Video 2</span></span>
                <span class="vidSelect right" data-video="6"><img src="IPadLogo.jpg"><span>Video 8a</span></span><br class="clear" />
                <span class="vidSelect left" data-video="3"><img src="IPadLogo.jpg"><span>Video 4</span></span>
                <span class="vidSelect right" data-video="5"><img src="IPadLogo.jpg"><span>Video 8b</span></span><br class="clear" />
            </div>
        	<ul id="video-controls" class="controls showControls">
                <li>
                    <span id="playpause" style="display: none;">&#9658;</span>
                </li>
            </ul>
            <input type="range" id="seek-bar" value="0" min="0" class="showControls">
        </div>
        <video id="video" src="1/video.mp4" controls preload="metadata" playsinline>
        </video>
    </figure>
    <script type="text/javascript">
        $('.menuContainer').addClass('change');
        var loc = window.location.href;
        var supportsVideo = !!document.createElement('video').canPlayType;
        if (supportsVideo) {
            var videoContainer = document.getElementById('videoContainer');
            var video = document.getElementById('video');
            var videoControls = document.getElementById('video-controls');

            var time;

            //Hide default controls
            video.controls = false;

            //Display custon controls
            videoControls.style.display = 'block';

            //Controls
            var playpause = document.getElementById('playpause');
            var seekBar = document.getElementById("seek-bar");
            var videoSelector = document.getElementById('videoSelector');
            var instructions = document.getElementById('instructions');
            var logo = document.getElementById('logo');

            //Add listeners

            //Play/Pause
            playpause.addEventListener('click', function(e) {
                playPause();
            });

            video.addEventListener('click', function(e) {
             playPause();
            });

            videoSelector.addEventListener('click', function(e) {
                playPause();
            });

            $('#seek-bar').on('touchstart', function() {
                video.pause();
            });

            $('#seek-bar').on('touchend', function() {
                time = video.duration * (seekBar.value / 100);
                video.currentTime = time;
                video.play();
            });

            // $('#seek-bar').on('mousedown', function() {
            //     video.pause();
            // });

            // $('#seek-bar').on('mouseup', function() {
            //     time = video.duration * (seekBar.value / 100);
            //     video.currentTime = time;
            //     video.play();
            // });


            // Update the seek bar as the video plays
            video.addEventListener("timeupdate", function() {
              // Calculate the slider value
              var value = (100 / video.duration) * video.currentTime;

              // Update the slider value
              seekBar.value = value;
            });


            video.onended = function() {
            	videoControls.classList.add('showControls');
                videoSelector.classList.add('showControls');
                seekBar.classList.add('showControls');
                instructions.classList.add('showControls');
                logo.classList.add('showControls');
                $('.menuContainer').addClass('change');
            	video.currentTime = 0;
            	video.pause();
            }

            $('.vidSelect').on("click", function() {
               var videoSource = $(this).attr('data-video');
               $('#seek-bar').val(0);
               video.src = videoSource + '/video.mp4';
            });
        }

        function playPause() {
            if (video.paused || video.ended) {
                videoControls.classList.remove('showControls');
                videoSelector.classList.remove('showControls');
                seekBar.classList.remove('showControls');
                instructions.classList.remove('showControls');
                logo.classList.remove('showControls');
                $('.menuContainer').removeClass('change');
                video.play();
            } 
            else {
                video.pause();
            }
        }

        function menuChange(x) {
            x.classList.toggle('change');
            videoControls.classList.toggle('showControls');
            videoSelector.classList.toggle('showControls');
            seekBar.classList.toggle('showControls');
            instructions.classList.toggle('showControls');
            logo.classList.toggle('showControls');
        }

    </script>
</body>
</html>
