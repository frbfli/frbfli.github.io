<!DOCTYPE html>
<html>
<head>
	<title>Legion Dice</title>

	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="yes" name="mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="user-scalable=no, width=device-width, initial-scale=1" name="viewport">

	
	
  	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  	<link rel="stylesheet" href="redTheme.min.css" />
  	<link rel="stylesheet" href="jquery.mobile.icons.min.css" />

	<style>
		.center {
		    text-align: center;
		}
/*		.redButton {
			background-color: #AD3131;
			color: white;
			text-shadow: unset;
			font-weight: unset;
		}*/
	</style>

	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>

<div data-role="page">

	<div data-role="header">
		<h1>Legion Dice</h1>
	</div><!-- /header -->

	<div role="main" class="ui-content center">
		<div class="ui-grid-b center">
			<div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:30px">White</div></div>
		    <div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:30px">Black</div></div>
		    <div class="ui-block-c"><div class="ui-bar ui-bar-a" style="height:30px">Red</div></div>
		    <div class="ui-block-a"><a class="ui-shadow ui-btn ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline dice" data-type="whiteAUp">Button</a></div>
		    <div class="ui-block-b"><a class="ui-shadow ui-btn ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline dice" data-type="blackAUp">Button</a></div>
		    <div class="ui-block-c"><a class="ui-shadow ui-btn ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline dice" data-type="redAUp">Button</a></div>
		    <div class="ui-block-a"><div class="ui-bar ui-bar-a" style="height:60px"><input name="number" pattern="[0-9]*" id="WA" value="0" type="number" class="attackValue"></div></div>
		    <div class="ui-block-b"><div class="ui-bar ui-bar-a" style="height:60px"><input name="number" pattern="[0-9]*" id="BA" value="0" type="number" class="attackValue"></div></div>
		    <div class="ui-block-c"><div class="ui-bar ui-bar-a" style="height:60px"><input name="number" pattern="[0-9]*" id="RA" value="0" type="number" class="attackValue"></div></div>
		    <div class="ui-block-a"><a class="ui-shadow ui-btn ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline dice" data-type="whiteADown">Button</a></div>
		    <div class="ui-block-b"><a class="ui-shadow ui-btn ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline dice" data-type="blackADown">Button</a></div>
		    <div class="ui-block-c"><a class="ui-shadow ui-btn ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline dice" data-type="redADown">Button</a></div>
		</div>
		<div class="ui-grid-solo">
		    <div class="ui-block-a"><a href="#" class="ui-btn ui-shadow ui-corner-all" id="rollAttack">Roll</a></div>
		</div>
		<div class="ui-grid-solo">
		    <div class="ui-block-a"><a href="#" class="ui-btn ui-btn-b ui-shadow ui-corner-all" id="resetButton">Reset</a></div>
		</div>
		<div id="rollResult">
		</div>
	</div><!-- /content -->

	<div data-role="footer">
		<h4>Created by Fli</h4>
	</div><!-- /footer -->
</div><!-- /page -->


<script>
	var AttackDice = function(s1, s2, s3, s4, s5, s6, s7, s8) {
		this.s1 = s1;
		this.s2 = s2;
		this.s3 = s3;
		this.s4 = s4;
		this.s5 = s5;
		this.s6 = s6;
		this.s7 = s7;
		this.s8 = s8;
	}

	var DefenseDice = function(s1, s2, s3, s4, s5, s6) {
		this.s1 = s1;
		this.s2 = s2;
		this.s3 = s3;
		this.s4 = s4;
		this.s5 = s5;
		this.s6 = s6;
	}

	var Dice = function(color, sides) {
		this.color = color;
		this.sides = sides;
	}

	var redA = ['crit', 'hit', 'hit', 'hit', 'hit', 'hit', 'surge', 'blank'];
	var blackA = ['crit', 'hit', 'hit', 'hit', 'surge', 'blank', 'blank', 'blank'];
	var whiteA = ['crit', 'hit', 'hit', 'surge', 'blank', 'blank', 'blank', 'blank'];

	var whiteD = ['block', 'surge', 'blank', 'blank', 'blank', 'blank'];
	var redD = ['block', 'block', 'block', 'surge', 'blank', 'blank'];

	$(document).ready(function() {
		$('.dice').on('click', function() {
			var tempDieVal = 0;
			var diceAction = $(this).attr('data-type');

			switch(diceAction) {
				case 'whiteAUp':
					tempDieVal = parseInt($('#WA').val()) + 1;
					$('#WA').val(tempDieVal);
					break;
				case 'whiteADown':
					tempDieVal = parseInt($('#WA').val()) - 1;
					if (tempDieVal < 0) {
						tempDieVal = 0;
					}
					$('#WA').val(tempDieVal);
					break;
				case 'blackAUp':
					tempDieVal = parseInt($('#BA').val()) + 1;
					$('#BA').val(tempDieVal);
					break;
				case 'blackADown':
					tempDieVal = parseInt($('#BA').val()) - 1;
					if (tempDieVal < 0) {
						tempDieVal = 0;
					}
					$('#BA').val(tempDieVal);
					break;
				case 'redAUp':
					tempDieVal = parseInt($('#RA').val()) + 1;
					$('#RA').val(tempDieVal);
					break;
				case 'redADown':
					tempDieVal = parseInt($('#RA').val()) - 1;
					if (tempDieVal < 0) {
						tempDieVal = 0;
					}
					$('#RA').val(tempDieVal);
					break;
			}
		});

		$('#resetButton').on('click', function() {
			$('.attackValue').val(0);
			$('#rollResult').html('');
		});

		$('#rollAttack').on('click', function() {
			$('#rollResult').html('');
			var whiteAttack = parseInt($('#WA').val());
			var blackAttack = parseInt($('#BA').val());
			var redAttack = parseInt($('#RA').val());

			var whiteAttackPool = [];
			var blackAttackPool = [];
			var redAttackPool = [];

			var attackDicePool = [];

			var whiteAx = 0;
			var blackAx = 0;
			var redAx = 0;

			while (whiteAx < whiteAttack) {
				whiteAttackPool.push('whiteAttack_' + whiteAx);
				whiteAx++;
			}

			while (blackAx < blackAttack) {
				blackAttackPool.push('blackAttack_' + blackAx);
				blackAx++;
			}

			while (redAx < redAttack) {
				redAttackPool.push('redAttack_' + redAx);
				redAx++;
			}

			for (x in whiteAttackPool) {
				attackDicePool.push(whiteAttackPool[x]);
			}

			for (x in blackAttackPool) {
				attackDicePool.push(blackAttackPool[x]);
			}

			for (x in redAttackPool) {
				attackDicePool.push(redAttackPool[x]);
			}

			roll(attackDicePool);

		});

	});

	function roll(d) {
		var diePool = [];
		for (x in d) {
			var tempDie = d[x].split('_');
			// console.log(tempDie[0], tempDie[1]);
			switch(tempDie[0]) {
				case "whiteAttack":
					diePool.push(new Dice('white', whiteA));
					break;
				case "blackAttack":
					diePool.push(new Dice('black', blackA));
					break;
				case "redAttack":
					diePool.push(new Dice('red', redA));
					break;
			}
		}
		// console.log(diePool);
		for (x in diePool) {
			// console.log(diePool[x].color, diePool[x].sides[returnRandom(8)]);
			$('#rollResult').append('<p><b>' + diePool[x].color + '</b>&nbsp;' + diePool[x].sides[returnRandom(8)] + '</p>');
		}
	}

	function returnRandom(max) {
		return Math.floor(Math.random() * Math.floor(max));
	}

</script>

</body>
</html>
